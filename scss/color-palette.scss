/*!
 * SCSS Color Palette Plugin (with dark mode via [data-mode="dark"])
 * Generates color utility classes with automatic shade variations
 * Version: 1.1.1
 */

@use 'sass:color';
@use 'sass:math';

// Default shade percentages
$color-shade-percentages: (
        50: 90%,
        100: 80%,
        200: 70%,
        300: 60%,
        400: 50%,
        500: 0%,
        600: -10%,
        700: -20%,
        800: -30%,
        900: -40%
);

// Default color palette
$color-palette: (
        'red': #ef4444,
        'green': #22c55e,
        'blue': #3b82f6,
        'yellow': #f59e0b,
        'purple': #8b5cf6,
        'pink': #ec4899,
        'indigo': #6366f1,
        'orange': #f97316,
        'teal': #14b8a6,
        'cyan': #06b6d4,
        'gray': #6b7280,
        'black': #000000,
        'white': #ffffff,
        'zinc': #71717a,
        'rose': #f43f5e
);

// Helper for !important
@function importance() {
  @return ' !important';
}

// Mixin to generate color utility classes
@mixin generate-color($base-color, $name, $prefix: '') {
  @each $key, $percent in $color-shade-percentages {
    $color: if(
                    $percent >= 0,
                    color.mix(white, $base-color, $percent),
                    color.mix(black, $base-color, math.abs($percent))
    );

    // Background
    .#{$prefix}bg-#{$name}-#{$key} {
      background-color: $color#{importance()};
    }

    // Text
    .#{$prefix}text-#{$name}-#{$key} {
      color: $color#{importance()};
    }

    // Border / Outline
    .#{$prefix}border-#{$name}-#{$key} {
      border-color: $color#{importance()};
    }
    .#{$prefix}outline-#{$name}-#{$key} {
      outline-color: $color#{importance()};
    }

    // SVG
    .#{$prefix}fill-#{$name}-#{$key} {
      fill: $color#{importance()};
    }
    .#{$prefix}stroke-#{$name}-#{$key} {
      stroke: $color#{importance()};
    }

    // UI / layout
    .#{$prefix}text-decoration-#{$name}-#{$key} {
      text-decoration-color: $color#{importance()};
    }
    .#{$prefix}caret-#{$name}-#{$key} {
      caret-color: $color#{importance()};
    }
    .#{$prefix}emphasis-#{$name}-#{$key} {
      text-emphasis-color: $color#{importance()};
    }
    .#{$prefix}accent-#{$name}-#{$key} {
      accent-color: $color#{importance()};
    }
    .#{$prefix}column-rule-#{$name}-#{$key} {
      column-rule-color: $color#{importance()};
    }

    // Shadow
    .#{$prefix}shadow-#{$name}-#{$key} {
      box-shadow: 0 0 0 0 $color#{importance()};
    }
  }
}

// Generate normal and dark-prefixed classes
@each $name, $color in $color-palette {
  // Normal variants
  @include generate-color($color, $name);

  // Dark variants (only active when [data-mode="dark"] is on <html>)
  html[data-mode='dark'] {
    @include generate-color($color, $name, 'dark\\:');
  }
}
